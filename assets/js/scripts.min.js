/*!
 * fireshell
 * Fiercely quick and opinionated front-ends
 * http://getfireshell.com
 * @author Todd Motto
 * @version 1.1.0
 * Copyright 2013. MIT licensed.
 */

$(function () {
  $('.dropdown-toggle').dropdown();
  $('[data-toggle="tooltip"]').tooltip();

  $(".slide-brand").owlCarousel({
    nav: false,
    dots: false,
    center: true,
    items: 4,
    loop: true,
    responsive: {
      0: {
        items: 1,
      },
      480: {
        items: 2,
      },
      1024: {
        items: 3,
      },
      1200: {
        items: 4,
      }
    }
  });

  $(".slide-sector").owlCarousel({
    nav: true,
    dots: false,
    autoWidth: true,
    items: 4,
    loop: false,
    responsive: {
      0: {
        items: 1,
      },
      480: {
        items: 2,
      },
      1024: {
        items: 3,
      },
      1200: {
        items: 4,
      }
    }
  })

  $(".slide-quote").owlCarousel({
    margin: 0,
    loop: false,
    items: 1,
    dots: false,
    animateOut: 'fadeOut',
    freeDrag: false,
    mouseDrag: false,
    touchDrag: false,
    responsive: {
      0: {
        dots: true,
      },
      769: {
        dots: false
      }
    }
  });

  $(".testimony-box .author").click(function () {
    var x = $(this).index();
    //move owl carosuel to x position
  })


  //Header Mobile Mneu
  $(".menu-trigger a, .sidenav .close").click(function () {
    $(".page .sidenav").toggleClass("show");
  })


  //Setup Modal Trigger & Close
  $(".modal-trigger").click(function (e) {
    e.preventDefault();
    e.stopPropagation();

    var target = $(this).data("target");

    $(".card-modal .modal-view").removeClass("active");
    $(target).addClass("active");
    $(target).find(".view").removeClass("active");
    $(target).find(".view:first-child").addClass("active");
    $(".card-modal").fadeIn();
  });

  $(".card-modal .close").click(function (e) {
    e.preventDefault();
    e.stopPropagation();

    var viewIndex = $(".card-modal .modal-view.active .view.active").index();

    if (viewIndex > 0) {
      //move backward
      var prev = $(".card-modal .modal-view.active .view:nth-child(" + viewIndex + ")");

      if (prev.length > 0) {
        $(".card-modal .modal-view.active .view").removeClass("active");
        $(prev).addClass("active");
      }
    }
    else {
      //close modal
      $(".card-modal").fadeOut();
    }
  })

  $(".card-modal .modal-view > .actions .next-btn").click(function (e) {
    e.preventDefault();
    e.stopPropagation();

    var viewIndex = $(".card-modal .modal-view.active .view.active").index();

    if (viewIndex >= 0) {
      //move forward
      var next = $(".card-modal .modal-view.active .view:nth-child(" + (viewIndex + 2) + ")");

      if (next.length > 0) {
        $(".card-modal .modal-view.active .view").removeClass("active");
        $(next).addClass("active");
      }
      else {
        $(".card-modal").fadeOut();
      }
    }
  })

  //Checklist Click 
  $(".check-list ul li").click(function () {
    var _input = $(this).find("input");
    if (_input.val() != undefined) {
      _input.attr("checked", "checked");
    }
  })

  //Wizard Complete CLick
  $(".card-box > .actions .next-btn").click(function (e) {
    e.preventDefault();
    e.stopPropagation();


    var viewIndex = $(".card-box .nav .nav-link.active").index();
    if (viewIndex == 0) {
      var target = $(".modal-view.success");
      $(".card-modal .close").hide();
      $(".card-modal .modal-view").removeClass("active");
      $(target).addClass("active");
      $(".card-modal").fadeIn();
    }
    else {
      var next = $(".card-box .nav .nav-link:nth-child(" + viewIndex + ")");
      next.trigger("click");
    }
  })


  //Admin Menu
  $(".icon.open-trigger").click(function (e) {
    e.preventDefault();
    if ($(window).width() > 768) {
      $(".admin .sidebar").toggleClass("nav-shrinked");
    }
    else {
      $(".admin .sidebar").toggleClass("nav-opened");
    }
  });

  $(window).resize(function (e) {
    $(".admin .sidebar").removeClass("nav-opened").removeClass("nav-shrinked");
  })
});
